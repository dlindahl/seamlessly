/*! Seamlessly - v0.0.1 - 2012-10-24
* https://github.com/dlindahl/seamlessly
* Copyright (c) 2012 Derek Lindahl; Licensed MIT, GPL */
(function(){var a,b,c=function(a,b){return function(){return a.apply(b,arguments)}};b=this,a=function(){function a(a){this.onLoad=c(this.onLoad,this),this.options=a,this.init()}return a.prototype.init=function(){return this.fetchContainer(),this.build(),this.listen()},a.prototype.fetchContainer=function(){return typeof this.options.el=="string"?this.container=document.querySelectorAll(this.options.el)[0]:this.container=this.options.el},a.prototype.build=function(){return this.iframe=document.createElement("iframe"),this.iframe.setAttribute("src",this.options.src),this.iframe.setAttribute("seamless","seamless"),this.iframe.setAttribute("allowtransparency",!0),this.iframe.setAttribute("frameborder",0),this.iframe.setAttribute("scrolling","no"),this.iframe.setAttribute("horizontalscrolling","no"),this.iframe.setAttribute("verticalscrolling","no"),this.iframe.setAttribute("role","application"),this.iframe.setAttribute("width","100%"),this.iframe.addEventListener("load",this.onLoad),this.container.appendChild(this.iframe)},a.prototype.publish=function(a,b){return this.iframe.contentWindow.postMessage([a,b],"*")},a.prototype.listen=function(){var a=this;return b.addEventListener("message",function(b){var c,d;d=b.data[0],c=b.data[1];switch(d){case"setHeight":return a.setHeight(c)}})},a.prototype.setHeight=function(a){return console.log("set height"),this.iframe.setAttribute("height",a)},a.prototype.onLoad=function(){return this.setReferrer(),this.copyCss()},a.prototype.setReferrer=function(){return this.publish("referrer",b.location.href)},a.prototype.copyCss=function(){var a,b,c,d,e,f;e=document.styleSheets,f=[];for(c=0,d=e.length;c<d;c++)b=e[c],f.push(function(){var c,d,e,f;e=b.rules,f=[];for(c=0,d=e.length;c<d;c++)a=e[c],f.push(this.publish("css",a.cssText));return f}.call(this));return f},a}(),this.Seamlessly=function(b){return new a(b)}}).call(this);